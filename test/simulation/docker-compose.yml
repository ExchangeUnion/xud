version: '3'
services:
  btcd:
    build: ./docker-btcd
    volumes:
      - btcd-vol:/app
  lnd:
    build: ./docker-lnd
    volumes:
      - lnd-vol:/app
  geth:
    build: ./docker-geth
    volumes:
      - geth-vol:/app
  raiden:
    build: ./docker-raiden
    volumes:
      - raiden-vol:/raiden-vol
  gomod:
    build:
      context: .
      dockerfile: ./Dockerfile_gomod
    volumes:
      - gomod-vol:/app
  test:
    build: .
    depends_on:
      - btcd
      - lnd
      - geth
      - raiden
      - gomod
    volumes:
      - btcd-vol:/btcd-vol
      - lnd-vol:/lnd-vol
      - geth-vol:/geth-vol
      - raiden-vol:/raiden-vol
      - gomod-vol:/gomod-vol
 #   command: go test -v
volumes:
  btcd-vol:
  lnd-vol:
  geth-vol:
  raiden-vol:
  gomod-vol:

