syntax = "proto3";

package xudp2p;

message Address {
    string host = 1 [json_name = "host"];
    uint32 port = 2 [json_name = "port"];
}

message Order {
    string id = 1 [json_name = "id"];
    string pair_id = 2 [json_name = "pair_id"];
    double price = 3 [json_name = "price"];
    double quantity = 4 [json_name = "quantity"];
    bool is_buy = 5 [json_name = "is_buy"];
}

message Node {
    string node_pub_key = 1 [json_name = "node_pub_key"];
    repeated Address addresses = 2 [json_name = "addresses"];
}

message PingPacket {
    string id = 1 [json_name = "id"];
}

message PongPacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
}

message OrderPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    Order order = 3 [json_name = "order"];
}

message OrderInvalidationPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    string order_id = 3 [json_name = "order_id"];
    string pair_id = 4 [json_name = "pair_id"];
    double quantity = 5 [json_name = "quantity"];
}

message GetOrdersPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    repeated string pair_ids = 3 [json_name = "pair_ids"];
}

message OrdersPacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
    string hash = 3 [json_name = "hash"];
    repeated Order orders = 4 [json_name = "orders"];
}

message HelloPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    string version = 3 [json_name = "version"];
    string node_pub_key = 4 [json_name = "node_pub_key"];
    repeated Address addresses = 5 [json_name = "addresses"];
    repeated string pairs = 6 [json_name = "pairs"];
    string raiden_address = 7 [json_name = "raiden_address"];
    string lndbtc_pub_key = 8 [json_name = "lnd_btc_pub_key"];
    string lndltc_pub_key = 9 [json_name = "lnd_ltc_pub_key"];
}

message DisconnectingPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    uint32 reason = 3 [json_name = "reason"];
    string payload = 4 [json_name = "payload"];
}

message GetNodesPacket {
    string id = 1 [json_name = "id"];
}

message NodesPacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
    string hash = 3 [json_name = "hash"];
    repeated Node nodes = 4 [json_name = "nodes"];
}

message SwapRequestPacket {
    string id = 1 [json_name = "id"];
    string hash = 2 [json_name = "hash"];
    double proposed_quantity = 3 [json_name = "proposed_quantity"];
    string pair_id = 4 [json_name = "pair_id"];
    string order_id = 5 [json_name = "order_id"];
    string r_hash = 6 [json_name = "r_hash"];
    int32 taker_cltv_delta = 7 [json_name = "taker_cltv_delta"];
}

message SwapAcceptedPacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
    string hash = 3 [json_name = "hash"];
    string r_hash = 4 [json_name = "r_hash"];
    double quantity = 5 [json_name = "quantity"];
    int32 maker_cltv_delta = 6 [json_name = "maker_cltv_delta"];
}

message SwapCompletePacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
    string hash = 3 [json_name = "hash"];
    string r_hash = 4 [json_name = "r_hash"];
}

message SwapFailedPacket {
    string id = 1 [json_name = "id"];
    string req_id = 2 [json_name = "req_id"];
    string hash = 3 [json_name = "hash"];
    string r_hash = 4 [json_name = "r_hash"];
    string error_message = 5 [json_name = "error_message"];
}
